<div class="container mt-5">
  <div class="card rounded shadow-sm">
    <div class="card-header bg-primary text-white">
      <h4 class="mb-0">Detalhes do Palestrante</h4>
    </div>
    <div class="card-body">
      <form [formGroup]="form">
        <div class="row">
          <div class="col-md-12">
            <label for="nome">Nome</label>
            <input type="text" class="form-control"
              [ngClass]="{'is-invalid': f.nome?.errors && f.nome?.touched, 'is-valid': f.nome?.valid && f.nome?.dirty}"
              formControlName="nome" placeholder="Insira o Nome">
            <div *ngIf="f.nome?.invalid && (f.nome?.dirty || f.nome?.touched)" class="invalid-feedback">
              <div *ngIf="f.nome?.errors.required && f.nome.touched">Nome é Obrigatório.</div>
              <div *ngIf="f.nome?.errors.minlength && f.nome.touched">Nome deve ter no mínimo 4 caracteres</div>
              <div *ngIf="f.nome?.errors.maxlength && f.nome.touched">Nome deve ter no máximo 50 caracteres.</div>
            </div>
            <div *ngIf="f.nome?.valid" class="valid-feedback">Nome Válido.</div>
          </div>
        </div>
        <div class="row mt-3">
          <div class="col-md-4">
            <label for="imagemURL">Imagem</label>
            <input type="text" class="form-control" [ngClass]="{'is-invalid': f.imagemURL.errors && f.imagemURL.touched, 'is-valid': f.imagemURL.valid && f.imagemURL.dirty}" formControlName="imagemURL" placeholder="imagem">
            <div *ngIf="f.imagemURL?.errors?.required && f.imagemURL?.touched" class="invalid-feedback">Imagem é obrigatório</div>
            <div *ngIf="f.imagemURL?.valid && f.imagemURL?.touched" class="valid-feedback">Imagem é Valida</div>
          </div>
          <div class="col-md-4">
            <label for="telefone">Telefone</label>
            <input type="text" class="form-control" prefix="+55 " mask="(00) 0 0000-0000" formControlName="telefone" placeholder="(00) 90000-0000" [ngClass]="{'is-invalid': f.telefone?.errors && f.telefone?.touched, 'is-valid': f.telefone?.valid && f.telefone?.dirty}" />
            <div *ngIf="f.telefone?.invalid && f.telefone?.touched" class="invalid-feedback">Telefone é obrigatório</div>
            <div *ngIf="f.telefone?.valid" class="valid-feedback">Telefone é Valido!</div>
          </div>
          <div class="col-md-4">
            <label for="email">Email</label>
            <input type="email" class="form-control" [ngClass]="{'is-invalid': f.email?.errors && f.email?.touched, 'is-valid': f.email?.valid && f.email?.dirty}" formControlName="email" placeholder="e-mail">
            <div *ngIf="f.email?.invalid && (f.email.touched || f.email?.dirty)" class="invalid-feedback">
              <div *ngIf="f.email?.errors.required">É Necessario digitar o E-mail.</div>
              <div *ngIf="f.email?.errors.email && f.email">Email Inválido</div>
            </div>
            <div *ngIf="f.email?.valid" class="valid-feedback">Email Valido</div>
          </div>
        </div>
        <div class="row mt-3">
          <div class="col-md-12">
            <label for="miniCurriculo">Mini Currículo</label>
            <textarea type="text" class="form-control" [ngClass]="{'is-invalid': f.miniCurriculo?.errors && f.miniCurriculo?.touched, 'is-valid': f.miniCurriculo?.valid && f.miniCurriculo?.dirty}" formControlName="miniCurriculo" placeholder="Insira o Mini Currículo"></textarea>
            <div *ngIf="f.miniCurriculo?.invalid && (f.miniCurriculo?.dirty || f.miniCurriculo.touched)" class="invalid-feedback">Mini Currículo é Obrigatório</div>
            <div *ngIf="f.miniCurriculo?.valid" class="valid-feedback">Mini Currículo Válido.</div>
          </div>
        </div>
        <div formArrayName="redesSociais">
          <div class="d-flex justify-content-between align-items-center mt-3">
            <h4>Redes Sociais</h4>
            <button (click)="adicionarRedeSocial()" class="btn btn-primary">
              <i class="fa fa-plus"></i>
            </button>
          </div>
          <div *ngFor="let redeSocial of redesSociais.controls; let i=index" [formGroupName]="i">
            <div class="row mt-2">
              <div class="col-md-5">
                <select class="form-select" formControlName="nome">
                  <option value="">Selecione</option>
                  <option *ngFor="let opcao of redesSociaisOpcoes" [value]="opcao.nome">
                    {{ opcao.nome }}
                  </option>
                </select>
              </div>
              <div class="col-md-5">
                <input type="text" class="form-control" formControlName="url" placeholder="URL">
              </div>
              <div class="col-md-2">
                <button (click)="removerRedeSocial(i)" class="btn btn-danger">
                  <i class="fa fa-trash"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
    <div class="card-footer">
      <div class="row">
        <div class="col d-flex justify-content-end">
          <button class="btn btn-outline-secondary me-2" (click)="resetarForm()">
            Cancelar
          </button>
          <button class="btn btn-success" type="submit" (click)="salvarAlteracao()" [disabled]="form.invalid">
            Salvar
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
